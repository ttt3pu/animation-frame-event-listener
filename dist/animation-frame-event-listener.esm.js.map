{"version":3,"file":"animation-frame-event-listener.esm.js","sources":["../src/animation-frame-event-listener.js"],"sourcesContent":["/**\n * Add event.\n * @param {string} element event target\n * @param {string} eventName scroll | resize\n * @param {string} eventId any unique id(use for add/remove)\n * @param {function} callback\n */\nexport const addAnimationFrameEventListener = (element, eventName, eventId, callback) => {\n  if (element[eventId] && element[eventId].callback) {\n    console.error('Event id is duplicate.');\n  }\n\n  element[eventId] = {};\n  element[eventId].isRunning = false;\n  element[eventId].callback = () => {\n    // 呼び出されるまで何もしない\n    if (!element[eventId].isRunning) {\n      element[eventId].isRunning = true;\n\n      // 描画する前のタイミングで呼び出してもらう\n      element.requestAnimationFrame(() => {\n        callback();\n\n        element[eventId].isRunning = false;\n      });\n    }\n  };\n\n  element.addEventListener(eventName, element[eventId].callback);\n};\n\n/**\n * Remove event.\n * @param {string} element event target\n * @param {string} eventName scroll | resize\n * @param {string} eventId any unique id(use for add/remove)\n*/\nexport const removeAnimationFrameEventListener = (element, eventName, eventId) => {\n  if (element[eventId] && element[eventId].callback) {\n    element.removeEventListener(eventName, element[eventId].callback);\n    element[eventId] = {};\n  }\n};\n"],"names":["addAnimationFrameEventListener","element","eventName","eventId","callback","console","error","isRunning","requestAnimationFrame","addEventListener","removeAnimationFrameEventListener","removeEventListener"],"mappings":"AAOaA,IAAAA,EAAiC,SAACC,EAASC,EAAWC,EAASC,GACtEH,EAAQE,IAAYF,EAAQE,GAASC,UACvCC,QAAQC,MAAM,0BAGhBL,EAAQE,GAAW,GACnBF,EAAQE,GAASI,WAAY,EAC7BN,EAAQE,GAASC,SAAW,WAErBH,EAAQE,GAASI,YACpBN,EAAQE,GAASI,WAAY,EAG7BN,EAAQO,sBAAsB,WAC5BJ,IAEAH,EAAQE,GAASI,WAAY,MAKnCN,EAAQQ,iBAAiBP,EAAWD,EAAQE,GAASC,WAS1CM,EAAoC,SAACT,EAASC,EAAWC,GAChEF,EAAQE,IAAYF,EAAQE,GAASC,WACvCH,EAAQU,oBAAoBT,EAAWD,EAAQE,GAASC,UACxDH,EAAQE,GAAW"}